# TCP와 UDP의 비교

## UDP

`UDP(User Datagram Protocol, 사용자 데이터그램 프로토콜)`은 **비연결형 프로토콜** 이다. IP 데이터그램을 캡슐화하여 보내는 방법과 연결 설정을 하지 않고 보내는 방법을 제공한다. `UDP`는 흐름제어, 오류제어 또는 손상된 세그먼트의 수신에 대한 재전송을 **하지 않는다.** 이 모두가 사용자 프로세의 몫이다. `UDP`가 행하는 것은 포트들을 사용하여 IP 프로토콜에 인터페이스를 제공하는 것이다.

종종 클라이언트는 서버로 짧은 요청을 보내고, 짧은 응답을 기대한다. 만약 요청 또는 응답이 손실된다면, 클라이언트는 time out 되고 다시 시도할 수 있으면 된다. 코드가 간단할 뿐만 아니라 TCP 처럼 초기설정(initial setup)에서 요구되는 프로토콜보다 적은 메세지가 요구된다.

`UDP`를 사용하는 것들에는 `DNS`가 있다. 어떤 호스트 네임의 IP 주소를 찾을 필요가 있는 프로그램은, DNS 서버로 호스트네임을 포함한 UDP 패킷을 보낸다. 이 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 응답한다. 사전에 설정이 필요하지 않으며 그 후에 해제가 필요하지 않다.

<br/>

### 정리
* User Datagram Protocol의 약자이다.
* 데이터를 데이터 그램 단위로 처리하는 프로토콜.
  * 데이터 그램 : 독립적인 관계를 지니는 패킷
* 비연결형 프로토콜로 사전에 연결 설정 없이 데이터를 전달한다.
* 사전에 연결 설정을 하지 않은 데이터 그램 방식을 통해 데이터를 전달하기 때문에 하나의 메시지에서 분할된 각각의 패킷은 서로 다른 경로로 전송될 수 있다.
* 송신측에서 전송한 패킷의 순서와 수신측에 도착한 패킷의 순서가 다를 수 있다. 그러나 서로 다른 경로로 패킷을 처리함에도 불구하고 순서를 부여하거나 재조립하지 않는다.
* 흐름 제어, 혼잡 제어, 오류 제어를 하지 않으므로 손상된 세그먼트에 대한 재전송을 하지 않는다.
* 이로 인해 속도가 빠르며 네트워크 부하가 적다는 장점이 있지만, 신뢰성 있는 데이터 전송을 보장하지 못한다.
* UDP는 RTP(Real Time Protocol), Multicast, DNS 등에서 사용된다

<br/>

## TCP

대부분의 인터넷 응용 분야들은 **신뢰성** 과 **순차적인 전달** 을 필요로 한다. UDP로는 이를 만족시킬 수 없으므로 다른 프로토콜이 필요하여 탄생한 것이 `TCP`이다. `TCP(Transmission Control Protocol, 전송제어 프로토콜)`는 신뢰성이 없는 인터넷을 통해 종단간에 신뢰성 있는 **바이트 스트림을 전송** 하도록 특별히 설계되었다. TCP 서비스는 송신자와 수신자 모두가 소켓이라고 부르는 종단점을 생성함으로써 이루어진다. TCP에서 연결 설정(connection establishment)는 `3-way handshake`를 통해 행해진다.

모든 TCP 연결은 전이중(full-duplex), 점대점(point to point) 방식이다. 전이중이란 전송이 양방향으로 동시에 일어날 수 있음을 의미하며 점대점이란 각 연결이 정확히 2 개의 종단점을 가지고 있음을 의미한다. TCP는 멀티캐스팅이나 브로드캐스팅을 지원하지 않는다.

<br/>

### 정리
* 일반적으로 TCP와 IP를 함께 사용하는데, IP가 데이터의 배달을 처리한다면 TCP는 패킷을 추적 및 관리한다.
* **신뢰성 있는 데이터 전송을 지원하는 연결 지향형 프로토콜이다.**
* 사전에 **3-way handshake**라는 과정을 통해 연결을 설정하고 통신을 시작한다.
* **4-way handshake** 과정을 통해 연결을 해제(가상 회선 방식)한다.
* **흐름 제어, 혼잡 제어, 오류 제어를 통해 신뢰성을 보장**한다. 그러나 이 때문에 UDP보다 전송 속도가 느리다는 단점이 있다.
* **데이터의 전송 순서를 보장**하며 수신 여부를 확인할 수 있다.
* TCP를 사용하는 예로는 대부분의 웹 HTTP 통신, 이메일, 파일 전송에 사용된다.
* TCP가 가상회선 방식을 제공한다는 것은 송신측과 수신측을 연결하여 패킷을 전송하기 위한 논리적 경로를 배정한다는 뜻이다.

> 패킷(Packet)?
* 인터넷 내에서 데이터를 보내기 위한 경로 배정(라우팅)을 효율적으로 하기 위해서 데이터를 여러 개의 조각으로 나누어 전송을 하는데, 이때 조각을 패킷이라고 한다.

> TCP는 패킷을 어떻게 추적 및 관리하는가?
* 데이터는 패킷 단위로 나누어 같은 목적지(IP 계층)으로 전송된다.

<br/>

**추가 참고 내용** 
### [스트림](http://www.ktword.co.kr/test/view/view.php?m_temp1=1311)

영어 뜻으로는 '흐르는 시냇물'을 의미한다.

* 데이터 관점
  * 일반적으로 데이터, 패킷, 비트 등의 일련의 연속성을 갖는 흐름을 의미
    * 음성, 영상, 텍스트 등의 작은 데이터 조각들이 하나의 줄기를 이루며, 순서대로 물 흐르듯이 전송되는 데이터 열
    * 스트림은 

* 프로세스 관점
  * 원격 호스트 상호간 또는 동일 호스트 내 프로세스 또는 장치 상호간의 통신에서, 큐에 의한 메시지 전달방식 등을 이용한 가상 연결 통로 또는 구현 소프트웨어 모듈

### [자바에서의 스트림](http://www.tcpschool.com/java/java_io_stream)

자바에서는 파일이나 콘솔의 입출력을 직접 다루지 않고,, 스트림(stream)이라는 흐름을 통해 다룬다.

스트림(stream)이란 실제의 입력이나 출력이 표현된 데이터의 이상화된 흐름을 의미한다. 즉, 스트림은 운영체제에 의해 생성되는 가상의 연결 고리를 의미하며, 중간 매개재 역할을 한다. 자세한 내용은 링크 참조

<br/>

**참조**
* [원본링크](https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Network#tcp%EC%99%80-udp%EC%9D%98-%EB%B9%84%EA%B5%90)
* [TCP/IP와 흐름제어/혼잡제어](https://gyoogle.dev/blog/computer-science/network/%ED%9D%90%EB%A6%84%EC%A0%9C%EC%96%B4%20&%20%ED%98%BC%EC%9E%A1%EC%A0%9C%EC%96%B4.html)
* [UDP](https://gyoogle.dev/blog/computer-science/network/UDP.html)